# Prompt Craft需求文档

**PromptCraft - 提示词工作台产品需求文档**

**版本：** 1.0
**日期：** 2025/4/22
**作者：** ZX

# 1.需求背景和现状

## 1.1 背景

本文档旨在定义 Prompt Craft 工作台的需求。Prompt Craft 是一个面向内部，旨在让本地化译者和语言负责人能够高效地创建、测试、评估、迭代和管理用于MT的提示词，从而提升翻译质量、一致性和效率。

## 1.2 现状

当前本地化内部没有一个有效且快速的优化prompt工作流程，基本无法高效的调整并验证prompt的效果。

且由于本地化有自己的机翻管线，因此也无法通过外部工具的workbench工具来满足需求。

# 2.目标和预估收益

* **提高效率：**缩短译者调试和优化提示词的时间。
* **提升质量：**通过精确的提示词获得更符合语气、术语和上下文的 AI 翻译结果。
* **促进协作与知识共享：**在语言团队内共享有效的提示词和评估结果。
* **标准化流程：**为提示词的创建、测试和评估提供统一的平台和流程。
* **数据驱动决策：**通过评估结果和评分，量化提示词的效果。

# 3.产品解决方案

## 3.1 基础框架

**包含模块**

* 基于语言的工作区划分
* 提示词的创建、编辑、版本控制 (基本历史、分支) 和标签管理。
* 提示词的片段管理功能，包括区段创建插入、移动、删除、和存储。
* 测试集的上传，包括用户在权限范围内上传和管理者统一对全语言上传。
* 使用选定提示词和测试集调用AI模型进行评估。
* 并排展示原文、机翻输出 (可多个) 和参考译文。
* 对输出进行手动评分和添加评论。
* 保存和导出评估结果。
* 提示词模板库。
* 比较提示词时高亮显示差异。
* 将提示词标识为范例。
* 和LMS集成部署。

**暂不包含（后续迭代）**

* 进阶版本控制 (如合并分支)。
* 进阶自动评估指标 (BLEU, COMET 等) 的深度集成与可视化。
* 实时协作编辑提示词。
* A/B 测试框架。

## 3.2 目标用户

**主要用户：** 语言负责人。

**次要用户：** 效能组、PM团队

## 3.3 整体架构与设计原则

#### 语言工作区

系统顶层按目标语言划分，每个语言拥有独立的工作区。

用户登录后（或直接抓取用户信息）被导向其负责的语言工作区。

#### 统一工作区与标签系统

每个语言工作区内包含一个统一的提示词库和测试集区域。

使用项目和标签系统对提示词和测试集进行分类和过滤。

**项目**

原神、星铁...etc

**核心标签类别**

* 模块分类：版本、宣发...
  + 内容类型：对话、系统、法务...
* 状态：草稿、测试中、测试完成、正式版本...

系统应允许管理员管理标签本身（增删改）。

## 3.4 功能需求（FR）

### 3.4.1 提示词编辑器模块（PE）

**FR-PE-01： 创建提示词——0**

用户应能创建新的提示词，包含名称、描述和提示词文本。**用户创建时可选择从空白开始，或从模板库/已分享的范例提示词开始。**

**FR-PE-02： 编辑提示词——0**

用户应能编辑现有提示词的名称、描述和文本。

**FR-PE-03： 提示词文本编辑器——0**

提供纯文本编辑区域。

支持常见变量格式 (e.g., {{variable}}) 的语法高亮。

展示当前风格指南中可选用的变量，用户可快速插入。

**FR-PE-04： 标签管理——2**

用户能为提示词添加一个或多个标签。

用户能移除提示词的标签。

用户能将提示词标记为“正式版本”，此标记自动视为正式产出预翻译中该项目该语言的默认prompt。

系统应提供基于标签筛选提示词的功能。

**FR-PE-05： 版本控制——1**

**历史记录：** 系统自动记录提示词的每次保存，形成版本历史。

**查看历史：** 用户能查看提示词的版本列表 (显示版本号、时间戳、修改人)。

**恢复版本：** 用户能将提示词恢复到任意历史版本。

**创建分支：** 用户能从某个特定版本创建一个新的分支，用于实验性修改。分支应有独立名称和历史逻辑。

**FR-PE-06： 提示词库视图——0**

显示当前语言工作区内 的所有提示词 (及其分支)。

提供搜索功能 (按名称、描述、部分文本内容)。

提供排序功能 (按名称、创建/修改日期)。

提供筛选功能 (按项目及标签，**以及是否被标记为"范例/推荐"**)。

**FR-PE-07： 提示词片段管理——3**

用户应能创建、命名、编辑和删除自己的提示词片段（常用的指令或文本块）。

提供界面管理和浏览个人创建的片段。

编辑器允许用户增删改或移动提示词片段，也能够存储或快速插入已存储的提示词片段

\*提示词片段的存储层级在语言层，跨语言暂不互通（考虑信息量过大）

**FR-PE-09： 分享提示词为范例——5**

用户应能将自己创建的、认为效果好的提示词标记为 "推荐范例" 或类似标识。

在提示词库视图中，应能筛选出这些被标记的范例提示词。

其他语言可以查看这些范例提示词 的内容，并可以 选择 "以此创建副本" 来快速复用。

### 3.4.2 评估模块（EV）

**FR-EV-01： 选择提示词——0**

用户应能从提示词库中选择一个或多个提示词版本/分支进行评估。

界面应允许用户同时选择来自不同基础提示词或不同版本/分支的提示词进行横向比较。

**FR-EV-02： 选择模型——5**

如果后端支持多个模型或版本，用户应能选择用于此次评估的模型。

界面应清晰显示每个提示词将使用哪个模型（如果允许不同提示词使用不同模型）。

**FR-EV-03： 测试集管理——1**

**上传用户测试集——1**

用户应能上传测试文件。支持格式至少包括 CSV, Excel。

上传时需指定原文列，可選指定參考译文、Extra信息、TextID。

管理者可针对所有语言上传统一测试集

**选择标准化测试集——1**

用户应能浏览和选择由管理员预先上传的标准测试集。

标准测试集可按标签 (如项目、内容类型) 进行分类和筛选。

**手动输入——5**

提供一个文本区域，允许用户快速输入少量源文本进行测试（例如 1-10 条）。

**FR-EV-04： 执行评估——1**

提供 "执行评估"按钮。

点击后，系统将选定的提示词、原文和extra信息，经过现有TM、TB和风格指南匹配管线，包装成完整prompt发送给模型。

显示评估进行中的状态或进度条。

**FR-EV-05： 结果展示——1**

评估完成后，以表格形式展示结果。

表格列应至少包含：ID (如有)、原文、模型输出 1 (标明使用的提示词版本/分支/模型/可选显示提示词内容)、AI 输出 2 (如选择多个提示词)、参考译文(如有)。

**FR-EV-05.1： 高亮提示词差异——5**

当用户选择了多个提示词进行比较时，在结果展示区域的上方或显着位置，应同时展示对应的提示词文本，并**高亮显示提示词之间的差异 (Diff)**，以便用户直观比较提示词的细微调整。

**FR-EV-05.2：新增提示词——3**

结果输出后，用户可以选择新增一个提示词栏位，选择版本并且再度发送翻译请求（原已跑的结果不变）

**FR-EV-06： 手动评分与反馈**

在每个输出旁边，提供评分控件 (e.g., 1-5 星评级下拉框，或简单 的数字输入框)。

在每个输出旁边，提供评论文本框，允许用户输入具体反馈。

**FR-EV-07：保存评估会话：——4**

用户应能保存当前的评估结果，包括使用的提示词、测试集、模型、评分和评论。

**FR-EV-08： 导出结果：——5**

 用户应能将评估结果（包含源文、输出、评分、评论等）导出为 CSV 或 Excel 文件。

**FR-EV-09： 评估结果汇总——2**

系统应自动集成用户保存的评估结果到数据库或KM中。

用户应能查看自己的历史评估记录。

提供筛选历史记录的功能 (按日期、使用的提示词版本、测试集等)。

### 3.4.3 用户与权限管理 （UM）

**FR-UM-01： 用户角色——1**

至少区分两种角色：普通用户 (语言负责人) 和管理员 。

**FR-UM-02： 权限——0**

所有用户可以创建/编辑/评估自己的提示词，上传个人测试集。

管理员可以管理标准化测试集（上传、删除、打标签）、管理系统标签。

## 3.5 非功能需求

### 3.5.1 性能

UI 响应流畅。中等大小测试集一个语言一般为100条句段，12个语言至少每1-2周会进行一次评测。

### 3.5.2 安全性

用户需登录验证或直接抓取用户LMS信息。确保用户之间的数据（尤其是个人测试集和评估结果）的隔离性。

### 3.5.3 可扩展性

架构应能支持未来增加更多语言、用户、提示词和更大的测试集。要易于集成新的 AI 模型。

### 3.5.4 后端集成

需要和两个管线集成

* 当前的机翻管线，包括TM、TB的匹配，prompt的拼接。Prompt编辑器内容需要和风格指南的栏位挂接。（见FR-PE-03）
* 预翻译使用的prompt。在工具标记为正式，自动作为该项目该语言预翻译的预设prompt
* 后端采用数据库的形式，所有的prompt、评分、标签等都存储在数据库中

# 4.发布标准与成功指标

**发布标准**

所有标记为 FR 且优先级大于5的核心功能已实现并通过测试。

核心工作流程（编辑 -> 测试 -> 评估 -> 迭代）顺畅可用。

系统在模拟生产环境下稳定运行。

基本用户文档或操作指南已准备好。

# 5.推进里程碑

## 核心原则

**MVP 优先：**尽快交付核心的“编辑-评估-反馈”闭环，让用户能实际使用起来。

**迭代开发：**每个阶段都是在前一阶段基础上构建，并允许根据用户反馈调整后续计划。

**风险前置：**尽早处理关键技术依赖和高风险项（如外部管线集成）。

**分批交付：**将功能按逻辑和优先级分组，形成可管理的发布阶段。

## 阶段 1: MVP - 核心评估闭环（预计1周）

### 目标

实现最基础的提示词创建、单提示词评估、结果查看和评分功能，打通核心流程。

### 关键功能

FR-UM-01/02 (核心): 基本用户角色 (普通用户/管理员) 和登录访问控制。

FR-PE-01 (核心): 创建提示词功能。

FR-PE-02 (核心): 编辑提示词功能。

FR-PE-03 (核心): 基础文本编辑器 (无高亮/变量)。

FR-PE-06 (核心): 基础提示词列表展示 (无复杂筛选/排序)。

FR-EV-01 (核心): **选择单个**提示词进行评估。

FR-EV-03 (核心 - 用户上传): 支持用户上传测试集 (CSV/Excel，指定原文列即可)。

FR-EV-04 (核心 - 风险点!): **基础**执行评估功能，**集成核心处理管线 (TM/TB/风格指南) 并调用单模型API**。(需要尽早明确接口和稳定性)

FR-EV-05 (核心): 基础结果表格展示 (ID, 原文, 模型输出 1, 参考译文)。

FR-EV-06 (核心): 手动评分 (1-5 星) 和评论功能。

### 产出

用户可以创建prompt，上传数据，成功调用模型（带TM、TB和风格指南）、针对单个prompt运行评估，查看结果并打分评论。

## 阶段 2: 核心增强与效率提升（预计1周）

### 目标

增强核心工作流的易用性和效率，引入版本控制和数据管理基础。

### 关键功能

FR-PE-05 (P1 - 历史/恢复): 实现提示词的版本历史记录查看和恢复功能。

FR-PE-07 (P1): **提示词片段管理与使用** (独立管理界面 + 编辑器内插入)。

FR-PE-03 (迭代): 编辑器支持变量高亮或可选变量展示，展示当前风格指南中可选用的变量，用户可快速插入。

FR-EV-01 (迭代): 支持**选择多个**提示词进行横向比较评估。

FR-EV-03 (P1 - 标准化): 管理员上传标准化测试集，用户可以选择使用。

FR-EV-07 (P1): **保存评估会话**至系统数据库。

FR-EV-08 (P2): **导出评估结果** (CSV/Excel)。

FR-EV-09 (P2): 查看已保存的评估历史记录及基本筛选。系统自动集成用户保存的评估结果到数据库或KM中。

FR-PE-04 (P2): **标签管理** (为提示词打标签及基础筛选)。用户能将提示词标记为“正式版本”(Mark as Production)，此标记自动视为正式产出预翻译中该项目该语言的默认prompt。

FR-UM-02 (迭代): 管理员管理标准化测试集和标签的界面。

FR-EV-05.2 (P3): 评估后**新增提示词**进行补充评估。

### 产出

用户可以比较多个prompt 效果，管理常用片段，追踪prompt修改历史，保存和导出评估结果，结果记录到后台，使用标准测试集。

## 阶段 3: 协作与高级功能（预计3天）

### 目标

引入协作功能和更高级的评估、编辑选项。

### 关键功能

FR-PE-05 (P1 - 分支): 实现提示词的**分支**功能。

FR-EV-05.1 (P3): **高亮提示词差异** (Diff)。

### 产出

用户可以更方便地进行实验性修改 (分支)，直观对比 prompt 差异，在评估中动态增加对比项，使用模板提高效率。

## 阶段 4: 低优先级与未来优化（根据反馈和资源决定）

### 目标

实现剩余的低优先级功能或根据前序阶段反馈进行优化。

### 可能功能

FR-EV-02 (P4): 支持选择不同的 AI 模型。

FR-EV-03 (P5): 手动输入少量文本进行测试。

性能优化、UI/UX 细节打磨。

根据用户反馈增加的其他 QoL功能。

### 产出

完成所有v1.0定义的功能，并根据实际使用情况进行优化。

# 附录. 功能模块总览

|  |  |  |  |
| --- | --- | --- | --- |
| 需求 ID (ID) | 功能模块名称 | 优先级 | 需求描述 |
| --- 提示词编辑器模块 (PE) --- | | | |
| FR-PE-01 | 创建提示词 | 0 | 用户应能创建新的提示词，包含名称、描述和提示词文本。用户创建时可选择从空白开始，或从模板库/已分享的范例提示词开始。 |
| FR-PE-02 | 编辑提示词 | 0 | 用户应能编辑现有提示词的名称、描述和文本。 |
| FR-PE-03 | 提示词文本编辑器 | 0 | 提供纯文本编辑区域。  支持常见变量格式 (e.g., {{variable}}) 的语法高亮。  展示当前风格指南中可选用的变量，用户可快速插入。 |
| FR-PE-04 | 标签管理 | 2 | 用户能为提示词添加一个或多个标签。  用户能移除提示词的标签。  系统应提供基于标签筛选提示词的功能。 |
| FR-PE-05 | 版本控制 | 1 | 历史记录： 系统自动记录提示词的每次保存，形成版本历史。  查看历史： 用户能查看提示词的版本列表 (显示版本号、时间戳、修改人)。  恢复版本： 用户能将提示词恢复到任意历史版本。  创建分支： 用户能从某个特定版本创建一个新的分支，用于实验性修改。分支应有独立名称和历史逻辑。 |
| FR-PE-06 | 提示词库视图 | 0 | 显示当前语言工作区内的所有提示词 (及其分支)。  提供搜索功能 (按名称、描述、部分文本内容)。  提供排序功能 (按名称、创建/修改日期)。  提供筛选功能 (按项目及标签，以及是否被标记为"范例/推荐")。 |
| FR-PE-07 | 提示词片段管理 | 3 | 用户应能创建、命名、编辑和删除自己的提示词片段（常用的指令或文本块）。  提供界面管理和浏览个人创建的片段。  编辑器允许用户增删改或移动提示词片段，也能够存储或快速插入已存储的提示词片段  \*提示词片段的存储层级在语言层，跨语言暂不互通（考虑信息量过大） |
| FR-PE-09 | 分享提示词为范例 | 5 | 用户应能将自己创建的、认为效果好的提示词标记为 "推荐范例" 或类似标识。  在提示词库视图中，应能筛选出这些被标记的范例提示词。  其他语言可以查看这些范例提示词的内容，并可以选择 "以此创建副本" 来快速复用。 |
| --- 评估模块 (EV) --- | | | |
| FR-EV-01 | 选择提示词 | 0 | 用户应能从提示词库中选择一个或多个提示词版本/分支进行评估。  界面应允许用户同时选择来自不同基础提示词或不同版本/分支的提示词进行横向比较。 |
| FR-EV-02 | 选择模型 | 5 | 如果后端支持多个模型或版本，用户应能选择用于此次评估的模型。  界面应清晰显示每个提示词将使用哪个模型（如果允许不同提示词使用不同模型）。 |
| FR-EV-03 | 测试集管理 | 1 | 上传用户测试集  -用户应能上传测试文件 (CSV, Excel)。  -需指定原文列，可选参考译文、Extra信息、TextID。  -管理者可针对所有语言上传统一测试集。  选择标准化测试集  -用户应能浏览和选择管理员上传的标准测试集。  -标准测试集可按标签分类筛选。 |
| FR-EV-04 | 执行评估 | 1 | 提供 "执行评估"按钮。  点击后，系统将选定的提示词、原文和extra信息，经过现有TM、TB和风格指南匹配管线，包装成完整prompt发送给模型。  显示评估进行中的状态或进度条。 |
| FR-EV-05 | 结果展示 | 1 | 评估完成后，以表格形式展示结果。  列应至少包含：ID、原文、模型输出 1 (标明提示词版本/分支/模型/可选显示提示词内容)、AI 输出 2 (如选多个)、参考译文。 |
| FR-EV-05.1 | 高亮提示词差异 | 5 | 当用户选择了多个提示词进行比较时，在结果区上方或显着位置，同时展示对应提示词文本，并高亮显示差异 (Diff)。 |
| FR-EV-05.2 | 新增提示词进行评估 | 3 | 结果输出后，用户可以选择新增一个提示词栏位，选择版本并且再度发送翻译请求（原已跑的结果不变）。 |
| FR-EV-06 | 手动评分与反馈 | 1 | 在每个输出旁边，提供评分控件 (e.g., 1-5 星)。<br>在每个输出旁边，提供评论文本框。 |
| FR-EV-07 | 保存评估会话 | 4 | 用户应能保存当前的评估结果，包括使用的提示词、测试集、模型、评分和评论。 |
| FR-EV-08 | 导出结果 | 5 | 用户应能将评估结果（包含源文、输出、评分、评论等）导出为 CSV 或 Excel 文件。 |
| FR-EV-09 | 评估结果汇总/历史 | 2 | 系统应自动集成用户保存的评估结果到数据库或KM中。  用户应能查看自己的历史评估记录。  提供筛选历史记录的功能 (按日期、使用的提示词版本、测试集等)。 |
| --- 用户与权限管理 (UM) --- | | | |
| FR-UM-01 | 用户角色 | 1 | 至少区分两种角色：普通用户 (语言负责人) 和管理员。 |
| FR-UM-02 | 权限 | 0 | 所有用户可以创建/编辑/评估自己的提示词，上传个人测试集。  管理员可以管理标准化测试集（上传、删除、打标签）、管理系统标签。 |
